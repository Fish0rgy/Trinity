using Trinity.Utilities;
using Trinity.SDK;
using Trinity.SDK.ButtonAPI;
using System;
using System.Net;
using System.Threading.Tasks;

namespace Trinity.Module.Exploit
{
    class VRCW : BaseModule
    {
        public VRCW() : base("Downloads VRCW", "Downloads VRCW", Main.Instance.Avatarexploitbutton, QMButtonIcons.LoadSpriteFromFile(Serpent.SavePath), false, false)
        { }



        public override void OnEnable()
        {
            MenuUI.Log("EXPLOITS: <color=green>Downloading The VRCW</color>", true);
            Task.Run(delegate
            {
                WebClient webClient = new WebClient
                {
                    Headers =
                    {
                        "User-Agent: Other"
                    }
                };
                webClient.DownloadFileAsync(new Uri(RoomManager.field_Internal_Static_ApiWorld_0.assetUrl), "Trinity/VRCW/" + RoomManager.field_Internal_Static_ApiWorld_0.name);
                LogHandler.Log(LogHandler.Colors.Green, "Downloaded VRCW Completed", false, false);
            });
        }
    }
}