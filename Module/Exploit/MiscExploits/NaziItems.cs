using MelonLoader;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using TMPro;
using Trinity.SDK;
using Trinity.SDK.ButtonAPI;
using UnityEngine;
using VRC.SDKBase;

namespace Trinity.Module.Exploit.MiscExploits
{
    internal class NaziItems : BaseModule
	{
		public static object CorLmao;
		public static Vector3 vec3poz;
		public static VRC_Pickup[] array1;
		internal static GameObject uia;
		public NaziItems() : base("Nazify Items", "Creates Nazi Symbol With Items", Main.Instance.Eventexploitbutton, QMButtonIcons.LoadSpriteFromFile(Serpent.CustomPath), true, false)
        {
        }

        public override void OnEnable()
        {
            vec3poz = VRCPlayer.field_Internal_Static_VRCPlayer_0.transform.localPosition;
            array1 = Resources.FindObjectsOfTypeAll<VRC_Pickup>().ToArray<VRC_Pickup>();
			CorLmao = MelonCoroutines.Start(SwastikaMaker());
            uia.gameObject.transform.Find("Image/Text (TMP)").gameObject.GetComponent<TextMeshProUGUI>().text = "trinityshit";
            uia.SetActive(false);
            uia.SetActive(true);
        }

        public override void OnDisable()
        {
			MelonCoroutines.Stop(CorLmao);
		}
        public static IEnumerator SwastikaMaker()
        {
            for (; ; )
            {
                yield return new WaitForSeconds(0.0001f);
                sovastica();
            }
            yield break;
        }
		public static void sovastica()
		{
			Vector3 vector = vec3poz;
			VRC_Pickup[] pickup = array1;
			try
			{
				WorldWrapper.vrc_Pickups.ToList().ForEach(item =>
				{
					bool check = Networking.GetOwner(item.gameObject) != Networking.LocalPlayer;
					if (check)
					{
						Networking.SetOwner(Networking.LocalPlayer, item.gameObject);
					}
				}); 
				pickup[0].transform.position = new Vector3(vector.x, vector.y, vector.z);
				pickup[1].transform.position = new Vector3(vector.x, vector.y + 0.5f, vector.z);
				pickup[2].transform.position = new Vector3(vector.x, vector.y + 1f, vector.z);
				pickup[3].transform.position = new Vector3(vector.x, vector.y + 1.5f, vector.z);
				pickup[4].transform.position = new Vector3(vector.x, vector.y + 2f, vector.z);
				pickup[17].transform.position = new Vector3(vector.x, vector.y + 0.5f, vector.z);
				pickup[18].transform.position = new Vector3(vector.x, vector.y + 1f, vector.z);
				pickup[19].transform.position = new Vector3(vector.x, vector.y + 1.5f, vector.z);
				pickup[20].transform.position = new Vector3(vector.x, vector.y, vector.z);
				pickup[21].transform.position = new Vector3(vector.x, vector.y + 2.5f, vector.z);
				pickup[22].transform.position = new Vector3(vector.x, vector.y + 3f, vector.z);
				pickup[5].transform.position = new Vector3(vector.x + 0.5f, vector.y + 1.5f, vector.z);
				pickup[6].transform.position = new Vector3(vector.x + 1f, vector.y + 1.5f, vector.z);
				pickup[7].transform.position = new Vector3(vector.x - 0.5f, vector.y + 1.5f, vector.z);
				pickup[8].transform.position = new Vector3(vector.x - 1f, vector.y + 1.5f, vector.z);
				pickup[27].transform.position = new Vector3(vector.x + 1.5f, vector.y + 1.5f, vector.z);
				pickup[28].transform.position = new Vector3(vector.x - 1.5f, vector.y + 1.5f, vector.z);
				pickup[9].transform.position = new Vector3(vector.x + 1.5f, vector.y + 1.7f, vector.z);
				pickup[10].transform.position = new Vector3(vector.x + 1.5f, vector.y + 1.9f, vector.z);
				pickup[23].transform.position = new Vector3(vector.x + 1.5f, vector.y + 2.1f, vector.z);
				pickup[11].transform.position = new Vector3(vector.x - 1.5f, vector.y + 1.3f, vector.z);
				pickup[12].transform.position = new Vector3(vector.x - 1.5f, vector.y + 1.1f, vector.z);
				pickup[24].transform.position = new Vector3(vector.x - 1.5f, vector.y + 1.3f, vector.z);
				pickup[13].transform.position = new Vector3(vector.x - 0.2f, vector.y + 3f, vector.z);
				pickup[14].transform.position = new Vector3(vector.x - 0.4f, vector.y + 3f, vector.z);
				pickup[25].transform.position = new Vector3(vector.x - 0.6f, vector.y + 3f, vector.z);
				pickup[15].transform.position = new Vector3(vector.x + 0.2f, vector.y, vector.z);
				pickup[16].transform.position = new Vector3(vector.x + 0.4f, vector.y, vector.z);
				pickup[26].transform.position = new Vector3(vector.x + 0.6f, vector.y, vector.z);
			}
			catch
			{
			}
		}
	}
}
